# 🎙️ Briefly - 유즈케이스 명세서

**작성일**: 2025년 06월 05일  
**프로젝트**: Briefly - AI 뉴스 팟캐스트 플랫폼  
**버전**: v1.0

---

## 📋 문서 개요

본 문서는 Briefly 플랫폼의 20개 핵심 유즈케이스에 대한 상세 명세서입니다. 각 유즈케이스는 제목, 액터, 시나리오, 결과, 예외 상황으로 구성되어 있습니다.

### 액터 정의
- **일반 사용자**: 뉴스를 소비하는 기존 사용자
- **신규 사용자**: 처음 서비스를 이용하는 사용자
- **시스템 관리자**: 서비스를 관리하는 관리자
- **자동화 시스템**: 매일 뉴스를 처리하는 배치 시스템

---

## 🔐 사용자 인증 및 온보딩

### UC-001: 카카오 소셜 로그인

| 항목 | 내용 |
|------|------|
| **제목** | UC-001: 카카오 소셜 로그인 |
| **액터** | 신규 사용자, 일반 사용자 |
| **조건** | - 사용자는 카카오 계정을 소유하고 있다. - 백엔드 Kakao OAuth API, FastAPI, JWT 발급 로직이 구비되어 있다. |
| **시나리오** | 
1. 사용자가 웹사이트 상단의 "카카오로 시작하기" 버튼을 클릭한다. 
2. 카카오 OAuth 인증 페이지로 리다이렉트된다. 
3. 인증이 완료되면, 프론트엔드는 `/login/kakao/callback` 으로 리다이렉트된다.
4. FastAPI 백엔드는 카카오에서 발급된 access_token으로 사용자 정보를 요청한다. 
5. 사용자 ID 및 닉네임, 이메일 등을 바탕으로 DynamoDB에 저장 또는 조회한다. 
6. JWT를 생성하여 프론트엔드에 전달하고, 사용자 세션을 설정한다. 
7. 사용자는 자동으로 `/ranking` 또는 `/onboarding` 페이지로 이동한다. |
| **결과** | 
사용자 브라우저는 JWT를 통해 로그인 상태가 유지된다. 
만약 신규 사용자라면 `/onboarding` 페이지로, 기존 사용자라면 `/ranking`으로 이동한다. |
| **예외** | 
카카오 인증 실패 - 사용자에게 "로그인에 실패했습니다. 다시 시도해주세요." 메시지 출력 access_token 만료 or 비정상 응답 - 사용자에게 "응답이 잘못 되었습니다. 다시 로그인해주세요." 메시지 출력. |

---

### UC-002: 회원가입 온보딩

| 항목 | 내용 |
|------|------|
| **제목** | UC-002: 회원가입 온보딩 |
| **액터** | 신규 사용자 |
| **조건** | - 사용자가 UC-001 카카오 로그인을 성공적으로 완료했다. - 사용자가 신규 사용자로 분류되어 온보딩이 필요하다. - FastAPI `/api/user/categories` 엔드포인트가 정상 작동한다. - DynamoDB Users 테이블이 정상 작동한다. |
| **시나리오** | 
1. 카카오 로그인을 완료한 신규 사용자가 온보딩 페이지에 진입한다
2. 서비스 소개 및 주요 기능을 안내받는다. 
3. 6개 뉴스 카테고리가 화면에 표시된다 (정치, 경제, 사회, 생활·문화, IT·과학, 연예).
4. 사용자가 관심 있는 카테고리를 1개 이상 선택한다. 
5. "시작하기" 버튼을 클릭한다. 
6. 프론트엔드는 `/api/user/categories` API를 호출하여 선택된 카테고리를 전송한다. 
7. 사용자 프로필에 관심 카테고리와 온보딩 완료 상태가 저장된다. 
8. 메인 뉴스 페이지로 리다이렉트된다. |
| **결과** | 
사용자 관심 카테고리가 DynamoDB에 저장되고 온보딩 상태가 완료로 변경된다. 선택한 카테고리의 뉴스가 우선적으로 표시되는 개인화된 피드가 구성된다. |
| **예외** | 
API 저장 오류 - "설정 저장에 실패했습니다. 다시 시도해주세요." 메시지와 재시도 버튼 제공 네트워크 타임아웃 - 로딩 상태 유지 후 자동 재시도 (3회 제한) |

---

### UC-003: 자동 로그인

| 항목 | 내용 |
|------|------|
| **제목** | UC-003: 자동 로그인 |
| **액터** | 일반 사용자 |
| **조건** | - 사용자 브라우저에 유효한 JWT 토큰이 저장되어 있다. - FastAPI `/api/auth/me` 엔드포인트가 정상 작동한다. - JWT 토큰 검증 로직이 구현되어 있다. - DynamoDB Users 테이블에 사용자 정보가 존재한다. |
| **시나리오** | 
1. 기존 사용자가 Briefly 웹사이트에 접속한다. 
2. 프론트엔드는 localStorage에서 JWT 토큰을 확인한다. 
3. 토큰이 존재하면 `/api/auth/me` API를 호출하여 토큰 유효성을 검증한다. 
4. FastAPI는 JWT 토큰을 디코딩하고 만료 시간을 확인한다. 
5. 유효한 토큰인 경우 DynamoDB에서 사용자 정보를 조회한다. 
6. 사용자의 관심 카테고리, 북마크 등 개인 설정을 로드한다. 
7. 로그인 과정 없이 바로 메인 뉴스 페이지로 리다이렉트한다. |
| **결과** | 사용자가 별도 로그인 과정 없이 자동으로 인증된다. 개인화된 뉴스 피드와 설정이 즉시 로드된다. 원활한 사용자 경험을 제공한다. |
| **예외** | 
JWT 토큰 만료 - 토큰 삭제 후 로그인 페이지로 리다이렉트 토큰 위조 또는 손상 - "인증에 실패했습니다. 다시 로그인해주세요." 메시지 후 로그인 페이지 이동 
서버 통신 오류 - 오프라인 모드 안내 후 새로고침 버튼 제공 사용자 정보 조회 실패 - 로그아웃 처리 후 로그인 페이지 이동

---

## 📰 뉴스 조회 및 탐색

### UC-004: 오늘의 뉴스 조회

| 항목 | 내용 |
|------|------|
| **제목** | UC-004: 오늘의 뉴스 조회 |
| **액터** | 일반 사용자 |
| **조건** | - 사용자는 로그인된 상태이다. - DynamoDB NewsCards 테이블에 당일 뉴스 데이터가 존재한다. - FastAPI `/api/news/today` 엔드포인트가 정상 작동한다. |
| **시나리오** | 
1. 사용자가 하단 네비게이션에서 "오늘의 뉴스" 탭을 클릭한다. 
2. 프론트엔드는 `/api/news/today` API를 호출한다. 
3. FastAPI는 DynamoDB NewsCards 테이블에서 당일 뉴스를 카테고리별로 그룹화하여 조회한다. 
4. 각 카테고리별 대표 뉴스 6개씩 그룹핑하여 응답한다. 
5. 프론트엔드는 뉴스 카드 컴포넌트로 제목, AI 요약, 카테고리, 시간을 렌더링한다. 
6. 상단에 6개 카테고리 필터 탭(정치, 경제, 사회, 생활·문화, IT·과학, 연예)을 표시한다. 
7. 사용자 스크롤 시 추가 뉴스를 제공한다. |
| **결과** | 당일 수집된 뉴스가 사용자 관심 카테고리 우선으로 정렬되어 표시된다. 각 뉴스 카드에는 AI 요약, 원문 링크, 북마크 버튼이 포함된다. |
| **예외** | 뉴스 데이터 없음 - "아직 오늘의 뉴스가 준비되지 않았습니다. 잠시 후 다시 확인해주세요." 메시지 표시 API 응답 오류 (500, 503) - "뉴스를 불러올 수 없습니다. 새로고침해주세요." 메시지와 재시도 버튼 제공 네트워크 타임아웃 - 스켈레톤 UI 표시 후 자동 재시도 (3회 제한) |

---

### UC-005: 뉴스 상세 보기

| 항목 | 내용 |
|------|------|
| **제목** | UC-005: 뉴스 상세 보기 |
| **액터** | 일반 사용자 |
| **조건** | - 사용자는 로그인된 상태이다. - 유효한 뉴스 ID가 URL 파라미터로 전달된다. - FastAPI `/api/news/{news_id}` 엔드포인트가 정상 작동한다. - DynamoDB NewsCards 테이블에 해당 뉴스 데이터가 존재한다. |
| **시나리오** | 
1. 사용자가 뉴스 목록에서 특정 뉴스 카드를 클릭한다. 
2. 프론트엔드는 `/news/{news_id}` 페이지로 라우팅한다. 
3. `/api/news/{news_id}` API를 호출하여 뉴스 상세 정보를 요청한다. 
4. FastAPI는 DynamoDB에서 해당 뉴스의 제목, 내용, URL, 카테고리, 작성시간을 조회한다. 
5. AI 요약 내용과 함께 뉴스 상세 정보를 렌더링한다.
6. 북마크 상태를 확인하여 버튼 UI를 업데이트한다. 
7. 하단에 동일 카테고리의 관련 뉴스 3개를 추천으로 표시한다. 
8. 조회수를 1 증가시켜 인기도 통계에 반영한다. |
| **결과** | 선택한 뉴스의 상세 정보와 AI 요약이 표시된다. 북마크, 공유, 원문 링크 이동 기능을 제공한다. 관련 뉴스 추천으로 사용자 체류 시간이 증가한다. |
| **예외** | 존재하지 않는 뉴스 ID - "뉴스를 찾을 수 없습니다. 삭제되었거나 잘못된 링크입니다." 메시지 표시 원문 링크 오류 - "원문 사이트에 접속할 수 없습니다" 안내 후 새 탭에서 열기 시도 API 응답 지연 - 스켈레톤 UI 표시 후 3초 타임아웃 시 재시도 버튼 제공 |

---

### UC-006: 카테고리별 필터링

| 항목 | 내용 |
|------|------|
| **제목** | UC-006: 카테고리별 필터링 |
| **액터** | 일반 사용자 |
| **조건** | - 사용자는 로그인된 상태이다. - FastAPI `/api/news?category={category}` 엔드포인트가 정상 작동한다. - DynamoDB NewsCards 테이블에 카테고리별 뉴스 데이터가 존재한다. - 6개 기본 카테고리(정치, 경제, 사회, 생활·문화, IT·과학, 연예)가 정의되어 있다. |
| **시나리오** | 
1. 사용자가 뉴스 목록 상단의 카테고리 탭을 확인한다. 
2. 6개 카테고리 중 원하는 카테고리(예: "경제")를 클릭한다. 
3. 프론트엔드는 `/api/news?category=경제` API를 호출한다. 
4. FastAPI는 DynamoDB에서 해당 카테고리 뉴스를 쿼리한다. 
5. 선택된 카테고리의 뉴스만 필터링되어 렌더링된다. 
6. 활성 탭의 디자인이 하이라이트 상태로 변경된다. 
7. "전체" 탭 클릭 시 모든 카테고리 뉴스가 다시 표시된다. |
| **결과** | 선택한 카테고리의 뉴스만 조회되어 관심 분야에 집중할 수 있다. 필터 상태가 URL에 반영되어 북마크 및 공유가 가능하다. 직관적인 탭 UI로 사용자 경험이 향상된다. |
| **예외** | 카테고리별 뉴스 없음 - "해당 카테고리의 뉴스가 아직 준비되지 않았습니다" 메시지와 다른 카테고리 제안 잘못된 카테고리 파라미터 - 자동으로 "전체" 카테고리로 리다이렉트 API 응답 오류 - "카테고리를 불러올 수 없습니다" 메시지와 새로고침 버튼 제공 |

---

---

## 🎙️ 팟캐스트 및 음성 서비스

### UC-007: 카테고리별 팟캐스트 청취

| 항목 | 내용 |
|------|------|
| **제목** | UC-007: 카테고리별 팟캐스트 청취 |
| **액터** | 일반 사용자 |
| **조건** | - 사용자는 로그인된 상태이다. - DynamoDB Frequencies 테이블에 당일 카테고리별 팟캐스트 데이터가 존재한다. - S3 버킷 `briefly-news-audio`에 음성 파일이 업로드되어 있다. - ElevenLabs TTS로 생성된 한국어 음성 파일이 준비되어 있다. |
| **시나리오** | 
1. 사용자가 하단 네비게이션에서 "내 주파수" 탭을 클릭한다. 
2. 프론트엔드는 `/api/frequencies` API를 호출한다. 
3. FastAPI는 DynamoDB Frequencies 테이블에서 당일 생성된 6개 카테고리별 팟캐스트를 조회한다. 
4. 각 카테고리별 음성 파일 S3 URL과 대본 길이, 재생 시간을 응답한다. 
5. 사용자가 원하는 카테고리의 팟캐스트 카드를 클릭한다. 
6. 오디오 플레이어 컴포넌트가 활성화되고 S3에서 음성 파일을 스트리밍한다. 
7. 재생/일시정지, 진행바, 15초 건너뛰기, 배속 조절(0.8x~1.5x) 컨트롤을 제공한다. 
8. 백그라운드 재생을 지원하여 다른 페이지 이동 시에도 재생이 계속된다. |
| **결과** | 선택한 카테고리의 고품질 한국어 TTS 팟캐스트가 재생된다. 사용자는 멀티태스킹하며 뉴스를 청취할 수 있다. 미니 플레이어로 다른 페이지에서도 재생 제어가 가능하다. |
| **예외** | 음성 파일 없음 - "아직 준비 중인 팟캐스트입니다. 매일 오전 6시에 업데이트됩니다." 메시지 표시 S3 스트리밍 오류 - "음성을 불러올 수 없습니다. 네트워크 연결을 확인해주세요." 안내 오디오 재생 권한 없음 - 브라우저 오디오 권한 요청 팝업 표시 네트워크 불안정으로 버퍼링 - 로딩 인디케이터 표시 후 자동 재시도 |

---

### UC-008: 음성 재생 제어

| 항목 | 내용 |
|------|------|
| **제목** | UC-008: 음성 재생 제어 |
| **액터** | 일반 사용자 |
| **조건** | - 사용자가 UC-007 팟캐스트 청취를 시작한 상태이다. - HTML5 Audio API가 브라우저에서 지원된다. - S3 음성 파일이 정상적으로 스트리밍되고 있다. - 브라우저에서 오디오 재생 권한이 허용되어 있다. |
| **시나리오** | 1. 팟캐스트 재생 시작과 함께 오디오 플레이어 컨트롤이 화면 하단에 표시된다. 2. 재생/일시정지 버튼을 클릭하여 음성 재생을 제어한다. 3. 진행 바를 클릭하거나 드래그하여 원하는 구간으로 즉시 이동한다. 4. 15초 뒤로/앞으로 버튼을 클릭하여 빠른 탐색을 수행한다. 5. 속도 조절 버튼(0.8x, 1.0x, 1.2x, 1.5x)을 선택하여 개인 선호에 맞게 조절한다. 6. 볼륨 슬라이더를 드래그하여 음량을 조절한다. 7. 최소화 버튼을 클릭하면 미니 플레이어 모드로 전환되어 화면 우하단에 고정된다. 8. 다른 페이지로 이동해도 백그라운드 재생이 계속되며 미니 플레이어로 제어 가능하다. |
| **결과** | 사용자가 원하는 방식으로 팟캐스트를 자유롭게 제어할 수 있다. 개인의 청취 습관에 맞는 속도와 볼륨으로 최적화된다. 미니 플레이어로 멀티태스킹하며 뉴스를 소비할 수 있다. |
| **예외** | 네트워크 불안정으로 버퍼링 - 로딩 스피너 표시 후 자동 재시도 (최대 3회) 오디오 재생 권한 없음 - "오디오 재생 권한이 필요합니다" 팝업과 브라우저 설정 안내 S3 스트리밍 오류 - "음성 파일을 불러올 수 없습니다. 새로고침 후 다시 시도해주세요" 메시지 HTML5 Audio API 미지원 - "브라우저에서 오디오 재생을 지원하지 않습니다" 안내 |

---

### UC-009: 오프라인 다운로드

| 항목 | 내용 |
|------|------|
| **제목** | UC-009: 오프라인 다운로드 |
| **액터** | 일반 사용자 |
| **조건** | - 사용자는 로그인된 상태이다. - 브라우저가 Service Worker와 Cache API를 지원한다. - S3 음성 파일이 다운로드 가능한 상태이다. - 사용자 디바이스에 충분한 저장 공간(최소 50MB)이 있다. |
| **시나리오** | 1. 사용자가 팟캐스트 카드에서 다운로드 아이콘을 클릭한다. 2. 브라우저는 Service Worker를 통해 S3 음성 파일 다운로드를 시작한다. 3. 다운로드 진행률이 프로그레스 바로 실시간 표시된다. 4. Cache API를 사용하여 음성 파일을 브라우저 로컬 스토리지에 저장한다. 5. 다운로드 완료 시 "오프라인 재생 가능" 토스트 메시지가 표시된다. 6. 다운로드된 파일은 "오프라인" 탭에서 별도 관리된다. 7. 네트워크 연결이 끊어져도 캐시된 파일로 정상 재생이 가능하다. 8. 저장 공간 관리 화면에서 다운로드된 파일을 개별 삭제할 수 있다. |
| **결과** | 네트워크 연결 없이도 팟캐스트를 원활하게 청취할 수 있다. 모바일 데이터 사용량을 절약하고 안정적인 재생 환경을 제공한다. 통근, 지하철 등 네트워크 불안정 환경에서도 뉴스 소비가 가능하다. |
| **예외** | 저장 공간 부족 - "저장 공간이 부족합니다. 다른 파일을 삭제 후 다시 시도해주세요" 안내 다운로드 중 네트워크 끊김 - 자동 재시도 (3회) 후 "다운로드 실패" 알림과 재시도 버튼 Service Worker 미지원 - "오프라인 기능을 사용할 수 없습니다. 최신 브라우저를 사용해주세요" 메시지 파일 손상 또는 재생 오류 - "파일이 손상되었습니다" 메시지와 함께 재다운로드 버튼 제공 |

---

---

## ⚙️ 개인화 및 설정

### UC-010: 관심 카테고리 변경

| 항목 | 내용 |
|------|------|
| **제목** | UC-010: 관심 카테고리 변경 |
| **액터** | 일반 사용자 |
| **조건** | - 사용자는 로그인된 상태이다. - FastAPI `/api/user/categories` 엔드포인트가 정상 작동한다. - DynamoDB Users 테이블에 사용자 선호 카테고리 필드가 구성되어 있다. - 사용자가 최소 1개 이상의 카테고리를 선택해야 한다. |
| **시나리오** | 1. 사용자가 프로필 메뉴에서 "관심 카테고리 설정"을 클릭한다. 2. 현재 설정된 카테고리들이 체크박스 활성화 상태로 표시된다. 3. 6개 카테고리(정치, 경제, 사회, 생활·문화, IT·과학, 연예) 중 원하는 항목을 체크/해제한다. 4. "저장" 버튼을 클릭한다. 5. 프론트엔드는 `/api/user/categories` PUT 요청으로 변경사항을 전송한다. 6. FastAPI는 JWT에서 사용자 ID를 추출하고 DynamoDB Users 테이블을 업데이트한다. 7. "관심 카테고리가 성공적으로 변경되었습니다" 토스트 메시지가 표시된다. 8. 사용자가 메인 페이지로 이동하면 새로운 설정에 따라 뉴스 피드가 재구성된다. |
| **결과** | 사용자의 관심 카테고리 설정이 업데이트되어 개인화된 뉴스 피드를 제공받는다. 변경된 설정은 실시간으로 모든 화면에 반영된다. 팟캐스트 추천과 뉴스 우선순위도 새로운 관심사에 맞춰 조정된다. |
| **예외** | 카테고리 전체 해제 시도 - "최소 1개 카테고리를 선택해주세요" 경고 메시지와 저장 버튼 비활성화 API 저장 오류 - "설정 변경에 실패했습니다. 네트워크 연결을 확인 후 다시 시도해주세요" 메시지 DynamoDB 업데이트 실패 - 이전 설정으로 롤백, "서버 오류로 설정이 저장되지 않았습니다" 안내 네트워크 타임아웃 - "설정 저장 중입니다..." 로딩 상태 유지 후 재시도 옵션 제공 |

---

### UC-011: 뉴스 북마크

| 항목 | 내용 |
|------|------|
| **제목** | UC-011: 뉴스 북마크 |
| **액터** | 일반 사용자 |
| **조건** | - 사용자는 로그인된 상태이다. - FastAPI `/api/news/bookmark` 엔드포인트가 정상 작동한다. - DynamoDB UserBookmarks 테이블이 구성되어 있다. - 북마크할 뉴스가 유효한 상태이다. |
| **시나리오** | 1. 사용자가 관심 있는 뉴스 카드에서 하트 모양의 북마크 아이콘을 클릭한다. 2. 프론트엔드는 `/api/news/bookmark` POST 요청으로 뉴스 ID와 사용자 정보를 전송한다. 3. FastAPI는 DynamoDB UserBookmarks 테이블에 북마크 레코드를 생성한다. 4. 북마크 아이콘이 채워진 하트로 변경되어 활성 상태를 표시한다. 5. "북마크에 저장되었습니다" 토스트 메시지가 2초간 표시된다. 6. 이미 북마크된 뉴스를 다시 클릭하면 북마크가 해제된다. 7. `/api/news/bookmark/{news_id}` DELETE 요청으로 해당 북마크 레코드가 삭제되고 "북마크가 해제되었습니다" 메시지가 표시된다. 8. 북마크 상태가 뉴스 목록, 상세 페이지, 북마크 페이지에서 실시간 동기화된다. |
| **결과** | 관심 뉴스가 개인 북마크 목록에 저장되어 나중에 쉽게 재접근할 수 있다. 북마크 상태가 모든 화면에서 일관되게 표시된다. 개인화된 뉴스 큐레이션 기능을 제공한다. |
| **예외** | 로그인 상태가 아님 - "로그인이 필요한 기능입니다" 메시지 후 로그인 페이지로 리다이렉트 북마크 저장 실패 - "북마크 저장에 실패했습니다. 다시 시도해주세요" 메시지와 아이콘 상태 롤백 중복 북마크 감지 - 자동으로 토글 동작 (추가 ↔ 해제) DynamoDB 쓰기 오류 - "서버 오류로 북마크를 저장할 수 없습니다" 메시지 |

---

### UC-012: 북마크 관리

| 항목 | 내용 |                                    
|------|------|
| **제목** | UC-012: 북마크 관리 |
| **액터** | 일반 사용자 |
| **조건** | - 사용자는 로그인된 상태이다. - FastAPI `/api/user/bookmarks` GET 엔드포인트가 정상 작동한다. - DynamoDB UserBookmarks 테이블에 사용자의 북마크 데이터가 존재한다. - 프론트엔드에 체크박스 다중 선택 기능이 구현되어 있다. |
| **시나리오** | 1. 사용자가 프로필 메뉴에서 "북마크" 버튼을 클릭한다. 2. 프론트엔드는 `/api/user/bookmarks` API를 호출한다. 3. DynamoDB에서 사용자의 모든 북마크를 저장 날짜 역순으로 조회한다. 4. 각 북마크가 카드 형태로 제목, AI 요약, 카테고리, 저장 날짜와 함께 표시된다. 5. 북마크 클릭 시 해당 뉴스 상세 페이지로 이동한다. 6. 개별 삭제 버튼으로 특정 북마크를 즉시 제거할 수 있다. 7. 체크박스로 여러 북마크를 선택하여 "선택 삭제" 버튼으로 일괄 제거한다. 8. 상단 카테고리 필터로 특정 분야의 북마크만 표시할 수 있다. |
| **결과** | 저장된 모든 북마크를 체계적으로 관리할 수 있다. 카테고리별 필터링과 검색으로 원하는 북마크를 빠르게 찾을 수 있다. 일괄 삭제 기능으로 효율적인 북마크 정리가 가능하다. |
| **예외** | 북마크 목록 비어있음 - "저장된 북마크가 없습니다. 관심 있는 뉴스를 북마크해보세요" 메시지와 인기 뉴스 추천 삭제된 뉴스 북마크 - "삭제된 뉴스입니다" 표시와 함께 북마크 목록에서 제거 옵션 제공 일괄 삭제 API 오류 - "일부 북마크 삭제에 실패했습니다. 개별적으로 다시 시도해주세요" 안내 북마크 로딩 실패 - "북마크를 불러올 수 없습니다. 새로고침해주세요" 메시지와 재시도 버튼 |

---

### UC-013: 프로필 정보 수정

| 항목 | 내용 |
|------|------|
| **제목** | UC-013: 프로필 정보 수정 |
| **액터** | 일반 사용자 |
| **조건** | - 사용자는 로그인된 상태이다. - FastAPI `/api/user/profile` 엔드포인트가 정상 작동한다. - S3 버킷 `briefly-user-profiles`에 이미지 업로드 권한이 있다. - DynamoDB Users 테이블이 정상 작동한다. |
| **시나리오** | 1. 사용자가 프로필 페이지에서 "프로필 편집" 버튼을 클릭한다. 2. 현재 닉네임, 프로필 사진, 이메일(수정 불가), 가입일이 폼 형태로 표시된다. 3. 닉네임 입력창에서 새로운 닉네임을 입력한다. 4. 프로필 사진 업로드 버튼으로 새 이미지를 선택한다 (JPG, PNG, 최대 5MB). 5. "저장" 버튼을 클릭한다. 6. 프론트엔드는 이미지를 S3에 업로드하고 URL을 받는다. 7. `/api/user/profile` PUT 요청으로 닉네임과 프로필 사진 URL을 전송한다. 8. FastAPI는 닉네임 중복 검사 후 DynamoDB Users 테이블을 업데이트한다. 9. "프로필이 성공적으로 수정되었습니다" 메시지와 함께 수정된 정보가 UI에 반영된다. |
| **결과** | 사용자 프로필 정보가 업데이트되어 개인화된 경험을 제공한다. 변경된 닉네임과 프로필 사진이 모든 화면에서 즉시 반영된다. S3에 안전하게 저장된 고품질 프로필 사진을 사용할 수 있다. |
| **예외** | 닉네임 중복 - "이미 사용 중인 닉네임입니다. 다른 닉네임을 선택해주세요" 메시지 이미지 업로드 실패 - "프로필 사진 업로드에 실패했습니다. 이미지 크기와 형식을 확인해주세요" 안내 닉네임 유효성 검사 실패 - "닉네임은 2-10자의 한글, 영문, 숫자만 사용 가능합니다" 메시지 DynamoDB 업데이트 오류 - "프로필 수정에 실패했습니다. 잠시 후 다시 시도해주세요" 메시지 |

---

## 🤖 자동화 시스템

### UC-014: 매일 뉴스 수집

| 항목 | 내용 |
|------|------|
| **제목** | UC-014: 매일 뉴스 수집 |
| **액터** | 자동화 시스템 (AWS Lambda) |
| **조건** | - EventBridge 스케줄러가 `cron(0 21 * * ? *)` (한국시간 오전 6시)로 설정되어 있다. - DeepSearch API 키가 유효하다. - DynamoDB NewsCards 테이블이 정상 작동한다. - Lambda 함수에 충분한 메모리(1024MB)와 타임아웃(900초)이 설정되어 있다. |
| **시나리오** | 1. EventBridge 스케줄러가 매일 오전 6시에 `daily-briefly-task` Lambda 함수를 트리거한다. 2. Lambda는 `app/tasks/collect_news.py` 모듈을 실행한다. 3. DeepSearch API에 6개 카테고리(politics, economy, society, culture, IT, entertainment)별로 요청을 전송한다. 4. 각 카테고리마다 최신 뉴스 5개씩 총 30개를 수집한다. 5. 수집된 뉴스의 제목, URL, 본문, 게시시간, 언론사 정보를 파싱한다. 6. 중복 검사를 위해 제목 기반 MD5 해시값을 생성한다. 7. DynamoDB NewsCards 테이블에 `news_id`, `title`, `content`, `category`, `date`, `url` 필드로 저장한다. 8. 성공/실패 결과를 CloudWatch Logs에 기록하고 다음 단계인 클러스터링 프로세스를 호출한다. |
| **결과** | 당일 최신 뉴스 30개가 카테고리별로 균등하게 DynamoDB에 저장된다. 클러스터링 및 AI 요약 프로세스를 위한 원본 데이터가 준비된다. 수집 통계가 CloudWatch 메트릭으로 기록된다. |
| **예외** | DeepSearch API 응답 오류 (429, 500) - 지수 백오프로 최대 3회 재시도 후 해당 카테고리 스킵 DynamoDB 쓰기 오류 - CloudWatch 알람 발생 및 관리자 알림 전송 Lambda 타임아웃 (15분 초과) - 처리 중인 데이터까지만 저장 후 다음 실행에서 재개 네트워크 연결 실패 - 재시도 로직 실행 후 실패 시 알람 발생 |

---

### UC-015: AI 요약 생성

| 항목 | 내용 |
|------|------|
| **제목** | UC-015: AI 요약 생성 |
| **액터** | 자동화 시스템 (AWS Lambda) |
| **조건** | - UC-014 뉴스 수집이 성공적으로 완료되어 있다. - OpenAI API 키가 유효하고 충분한 크레딧이 있다. - DynamoDB NewsCards와 Frequencies 테이블이 정상 작동한다. - `app/services/clustering_service.py`와 `openai_service.py` 모듈이 구현되어 있다. |
| **시나리오** | 1. 뉴스 수집 완료 후 `app/tasks/generate_frequency.py` 모듈이 실행된다. 2. DynamoDB NewsCards에서 당일 수집된 30개 뉴스를 조회한다. 3. 물리적 클러스터링: 제목 기반 유사도 80% 이상인 뉴스를 중복 제거한다. 4. OpenAI text-embedding-3-small 모델로 뉴스 임베딩 벡터를 생성한다. 5. 의미적 클러스터링: 코사인 유사도 75% 이상인 뉴스를 추가 제거한다. 6. 중복 제거된 뉴스를 6개 카테고리별로 그룹화한다. 7. 각 카테고리별로 GPT-4o-mini에 "1800-2500자 팟캐스트 대본 생성" 프롬프트 전송한다. 8. 생성된 대본을 DynamoDB Frequencies 테이블에 `frequency_id`, `category`, `script`, `audio_url` 필드로 저장한다. 9. 토큰 사용량(input/output)과 처리 시간을 CloudWatch 커스텀 메트릭으로 기록한다. |
| **결과** | 6개 카테고리별 고품질 AI 요약 대본이 생성된다. 이중 클러스터링으로 토큰 사용량이 50% 절약된다 (90,000자 → 45,000자). TTS 변환을 위한 최적화된 한국어 대본이 준비된다. |
| **예외** | OpenAI API 요청 한도 초과 (429) - 지수 백오프로 재시도, 필요시 처리 지연 알림 GPT 응답 품질 저하 (대본 길이 부족, 형식 오류) - 최대 2회 재생성 요청, 실패 시 이전 버전 대본 사용 임베딩 생성 실패 - 의미적 클러스터링 스킵하고 물리적 클러스터링만 수행 DynamoDB 쓰기 제한 초과 - 배치 쓰기로 재시도, 실패 시 CloudWatch 알람 |

---

### UC-016: 음성 변환 처리

| 항목 | 내용 |
|------|------|
| **제목** | UC-016: 음성 변환 처리 |
| **액터** | 자동화 시스템 (AWS Lambda) |
| **조건** | - UC-015 AI 요약 생성이 성공적으로 완료되어 있다. - ElevenLabs API 키가 유효하고 충분한 크레딧이 있다. - S3 버킷 `briefly-news-audio`에 업로드 권한이 있다. - 한국어 TTS 모델 `TX3LPaxmHKxFdv7VOQHJ`이 사용 가능하다. |
| **시나리오** | 1. AI 요약 완료 후 `app/tasks/generate_audio.py` 모듈이 실행된다. 2. DynamoDB Frequencies 테이블에서 당일 생성된 6개 카테고리 대본을 조회한다. 3. 각 카테고리별로 ElevenLabs TTS API에 대본을 전송한다. 4. 한국어 최적화 음성 모델로 고품질 음성 파일을 생성한다. 5. 생성된 MP3 파일을 S3 버킷에 `{YYYY-MM-DD}/{category}.mp3` 형식으로 업로드한다. 6. S3 업로드 완료 후 해당 URL을 DynamoDB Frequencies 테이블의 `audio_url` 필드에 업데이트한다. 7. 모든 카테고리 처리 완료 후 CloudWatch 메트릭으로 성공/실패 통계를 기록한다. 8. SNS를 통해 관리자에게 "일일 팟캐스트 생성 완료" 알림을 전송한다. |
| **결과** | 6개 카테고리별 고품질 한국어 팟캐스트가 S3에 저장된다. 사용자들이 당일 오전 6시부터 스트리밍 청취가 가능하다. 완전 자동화된 일일 뉴스 팟캐스트 생성 파이프라인이 완성된다. |
| **예외** | ElevenLabs API 오류 (429, 500) - 지수 백오프로 재시도, 실패 시 OpenAI TTS로 대체 S3 업로드 실패 - 로컬 임시 저장 후 재업로드 시도 (3회 제한) 음성 품질 검증 실패 - 해당 카테고리만 재생성, 다른 카테고리는 정상 진행 Lambda 메모리 부족 - 처리 중인 파일 임시 저장 후 다음 실행에서 재개 |

---

## 🔧 관리자 기능

### UC-017: 시스템 모니터링

| 항목 | 내용 |
|------|------|
| **제목** | UC-017: 시스템 모니터링 |
| **액터** | 시스템 관리자 |
| **조건** | - 관리자는 AWS 콘솔 접근 권한을 가지고 있다. - CloudWatch 대시보드가 구성되어 있다. - Lambda, DynamoDB, S3, API Gateway에 대한 메트릭이 활성화되어 있다. - SNS 알람과 CloudWatch 알람이 설정되어 있다. |
| **시나리오** | 1. 관리자가 AWS CloudWatch 대시보드에 접속한다. 2. "Briefly 시스템 상태" 대시보드에서 핵심 지표를 확인한다. 3. Lambda 함수별 실행 상태, 오류율, 실행 시간을 모니터링한다. 4. DynamoDB 테이블별 읽기/쓰기 용량 사용률과 스로틀링 여부를 점검한다. 5. API Gateway의 응답 시간, 성공률, 4xx/5xx 오류 비율을 확인한다. 6. S3 스토리지 사용량, 요청 수, 데이터 전송량을 분석한다. 7. 사용자 활동 지표(DAU, 팟캐스트 재생 수, 북마크 수)를 검토한다. 8. 알람 상태와 최근 24시간 알림 내역을 확인한다. 9. 이상 징후 발견 시 수동으로 Lambda 함수를 재실행하거나 서비스를 재시작한다. |
| **결과** | 시스템 전반의 건강 상태를 실시간으로 파악하여 안정적인 서비스를 제공한다. 문제 발생 시 즉시 감지하고 신속한 대응이 가능하다. 성능 최적화와 비용 관리를 위한 데이터 기반 의사결정을 할 수 있다. |
| **예외** | CloudWatch 접속 실패 - AWS Management Console 직접 접근으로 대체 심각한 시스템 오류 감지 - 즉시 긴급 대응 프로토콜 실행, 개발팀 호출 모니터링 데이터 누락 - CloudTrail 로그와 Lambda 로그 직접 확인 알람 시스템 장애 - 수동 모니터링 주기를 15분으로 단축, 대체 알림 채널 활성화 |

---

## 📊 유즈케이스 매트릭스

| 기능 영역 | 유즈케이스 수 | 복잡도 | 우선순위 |
|-----------|---------------|--------|----------|
| 사용자 인증 및 온보딩 | 3개 | 중간 | 높음 |
| 뉴스 조회 및 탐색 | 3개 | 중간 | 높음 |
| 팟캐스트 및 음성 서비스 | 3개 | 높음 | 높음 |
| 개인화 및 설정 | 4개 | 중간 | 중간 |
| 자동화 시스템 | 3개 | 높음 | 높음 |
| 관리자 기능 | 1개 | 중간 | 중간 |

---

**문서 작성 완료일**: 2025년 06월 05일  
**최종 검토일**: 2025년 06월 05일  
**문의 사항**: 프로젝트 팀 (briefly.team@example.com) 