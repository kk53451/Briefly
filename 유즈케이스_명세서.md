# 🎙️ Briefly - 유즈케이스 명세서

**작성일**: 2025년 06월 05일  
**프로젝트**: Briefly - AI 뉴스 팟캐스트 플랫폼  
**버전**: v1.0

---

## 📋 문서 개요

본 문서는 Briefly 플랫폼의 13개 핵심 유즈케이스에 대한 상세 명세서입니다. 각 유즈케이스는 제목, 액터, 시나리오, 결과, 예외 상황으로 구성되어 있습니다.

### 액터 정의
- **일반 사용자**: 뉴스를 소비하는 기존 사용자
- **신규 사용자**: 처음 서비스를 이용하는 사용자
- **시스템 관리자**: 서비스를 관리하는 관리자
- **자동화 시스템**: 매일 뉴스를 처리하는 배치 시스템

---

## 🔐 사용자 인증 및 온보딩

### UC-001: 카카오 소셜 로그인

| 항목 | 내용 |
|------|------|
| **제목** | UC-001: 카카오 소셜 로그인 |
| **액터** | 신규 사용자, 일반 사용자 |
| **조건** | - 사용자는 카카오 계정을 소유하고 있다.<br/>- 백엔드 Kakao OAuth API, FastAPI, JWT 발급 로직이 구비되어 있다. |
| **시나리오** | 1. 사용자가 웹사이트 상단의 "카카오로 시작하기" 버튼을 클릭한다.<br/>2. 카카오 OAuth 인증 페이지로 리다이렉트된다.<br/>3. 인증이 완료되면, 프론트엔드는 `/login/kakao/callback` 으로 리다이렉트된다.<br/>4. FastAPI 백엔드는 카카오에서 발급된 access_token으로 사용자 정보를 요청한다.<br/>5. 사용자 ID 및 닉네임, 이메일 등을 바탕으로 DynamoDB에 저장 또는 조회한다.<br/>6. JWT를 생성하여 프론트엔드에 전달하고, 사용자 세션을 설정한다.<br/>7. 사용자는 자동으로 `/ranking` 또는 `/onboarding` 페이지로 이동한다. |
| **결과** | 사용자 브라우저는 JWT를 통해 로그인 상태가 유지된다.<br/>만약 신규 사용자라면 `/onboarding` 페이지로, 기존 사용자라면 `/ranking`으로 이동한다. |
| **예외** | 카카오 인증 실패<br/>- 사용자에게 "로그인에 실패했습니다. 다시 시도해주세요." 메시지 출력<br/>access_token 만료 or 비정상 응답<br/>- 사용자에게 "응답이 잘못 되었습니다. 다시 로그인해주세요." 메시지 출력. |

---

### UC-002: 회원가입 온보딩

| 항목 | 내용 |
|------|------|
| **제목** | UC-002: 회원가입 온보딩 |
| **액터** | 신규 사용자 |
| **조건** | - 사용자가 UC-001 카카오 로그인을 성공적으로 완료했다.<br/>- 사용자가 신규 사용자로 분류되어 온보딩이 필요하다.<br/>- FastAPI `/api/user/categories` 엔드포인트가 정상 작동한다.<br/>- DynamoDB Users 테이블이 정상 작동한다. |
| **시나리오** | 1. 카카오 로그인을 완료한 신규 사용자가 온보딩 페이지에 진입한다.<br/>2. 서비스 소개 및 주요 기능을 안내받는다.<br/>3. 6개 뉴스 카테고리가 화면에 표시된다 (정치, 경제, 사회, 생활·문화, IT·과학, 연예).<br/>4. 사용자가 관심 있는 카테고리를 1개 이상 선택한다.<br/>5. "시작하기" 버튼을 클릭한다.<br/>6. 프론트엔드는 `/api/user/categories` API를 호출하여 선택된 카테고리를 전송한다.<br/>7. 사용자 프로필에 관심 카테고리와 온보딩 완료 상태가 저장된다.<br/>8. 메인 뉴스 페이지로 리다이렉트된다. |
| **결과** | 사용자 관심 카테고리가 DynamoDB에 저장되고 온보딩 상태가 완료로 변경된다.<br/>선택한 카테고리의 뉴스가 우선적으로 표시되는 개인화된 피드가 구성된다. |
| **예외** | 카테고리 미선택 시도<br/>- "최소 1개 카테고리를 선택해주세요" 경고 메시지 표시<br/>API 저장 오류<br/>- "설정 저장에 실패했습니다. 다시 시도해주세요." 메시지와 재시도 버튼 제공<br/>네트워크 타임아웃<br/>- 로딩 상태 유지 후 자동 재시도 (3회 제한) |

---

### UC-003: 자동 로그인

| 항목 | 내용 |
|------|------|
| **제목** | UC-003: 자동 로그인 |
| **액터** | 일반 사용자 |
| **조건** | - 사용자 브라우저에 유효한 JWT 토큰이 저장되어 있다.<br/>- FastAPI `/api/auth/me` 엔드포인트가 정상 작동한다.<br/>- JWT 토큰 검증 로직이 구현되어 있다.<br/>- DynamoDB Users 테이블에 사용자 정보가 존재한다. |
| **시나리오** | 1. 기존 사용자가 Briefly 웹사이트에 접속한다.<br/>2. 프론트엔드는 localStorage에서 JWT 토큰을 확인한다.<br/>3. 토큰이 존재하면 `/api/auth/me` API를 호출하여 토큰 유효성을 검증한다.<br/>4. FastAPI는 JWT 토큰을 디코딩하고 만료 시간을 확인한다.<br/>5. 유효한 토큰인 경우 DynamoDB에서 사용자 정보를 조회한다.<br/>6. 사용자의 관심 카테고리, 북마크 등 개인 설정을 로드한다.<br/>7. 로그인 과정 없이 바로 메인 뉴스 페이지로 리다이렉트한다. |
| **결과** | 사용자가 별도 로그인 과정 없이 자동으로 인증된다.<br/>개인화된 뉴스 피드와 설정이 즉시 로드된다.<br/>원활한 사용자 경험을 제공한다. |
| **예외** | JWT 토큰 만료<br/>- 토큰 삭제 후 로그인 페이지로 리다이렉트<br/>토큰 위조 또는 손상<br/>- "인증에 실패했습니다. 다시 로그인해주세요." 메시지 후 로그인 페이지 이동<br/>서버 통신 오류<br/>- 오프라인 모드 안내 후 새로고침 버튼 제공<br/>사용자 정보 조회 실패<br/>- 로그아웃 처리 후 로그인 페이지 이동 |

---

## 📰 뉴스 조회 및 탐색

### UC-004: 오늘의 뉴스 조회

| 항목 | 내용 |
|------|------|
| **제목** | UC-004: 오늘의 뉴스 조회 |
| **액터** | 일반 사용자 |
| **조건** | - 사용자는 로그인된 상태이다.<br/>- DynamoDB NewsCards 테이블에 당일 뉴스 데이터가 존재한다.<br/>- FastAPI `/api/news/today` 엔드포인트가 정상 작동한다. |
| **시나리오** | 1. 사용자가 하단 네비게이션에서 "오늘의 뉴스" 탭을 클릭한다.<br/>2. 프론트엔드는 `/api/news/today` API를 호출한다.<br/>3. FastAPI는 DynamoDB NewsCards 테이블에서 당일 뉴스를 카테고리별로 그룹화하여 조회한다.<br/>4. 각 카테고리별 대표 뉴스 6개씩 그룹핑하여 응답한다.<br/>5. 프론트엔드는 뉴스 카드 컴포넌트로 제목, AI 요약, 카테고리, 시간을 렌더링한다.<br/>6. 상단에 6개 카테고리 필터 탭(정치, 경제, 사회, 생활·문화, IT·과학, 연예)을 표시한다.<br/>7. 사용자 스크롤 시 추가 뉴스를 제공한다. |
| **결과** | 당일 수집된 뉴스가 사용자 관심 카테고리 우선으로 정렬되어 표시된다.<br/>각 뉴스 카드에는 AI 요약, 원문 링크, 북마크 버튼이 포함된다. |
| **예외** | 뉴스 데이터 없음<br/>- "아직 오늘의 뉴스가 준비되지 않았습니다. 잠시 후 다시 확인해주세요." 메시지 표시<br/>API 응답 오류 (500, 503)<br/>- "뉴스를 불러올 수 없습니다. 새로고침해주세요." 메시지와 재시도 버튼 제공<br/>네트워크 타임아웃<br/>- 스켈레톤 UI 표시 후 자동 재시도 (3회 제한) |

---

### UC-005: 뉴스 상세 보기

| 항목 | 내용 |
|------|------|
| **제목** | UC-005: 뉴스 상세 보기 |
| **액터** | 일반 사용자 |
| **조건** | - 사용자는 로그인된 상태이다.<br/>- 유효한 뉴스 ID가 URL 파라미터로 전달된다.<br/>- FastAPI `/api/news/{news_id}` 엔드포인트가 정상 작동한다.<br/>- DynamoDB NewsCards 테이블에 해당 뉴스 데이터가 존재한다. |
| **시나리오** | 1. 사용자가 뉴스 목록에서 특정 뉴스 카드를 클릭한다.<br/>2. 프론트엔드는 `/news/{news_id}` 페이지로 라우팅한다.<br/>3. `/api/news/{news_id}` API를 호출하여 뉴스 상세 정보를 요청한다.<br/>4. FastAPI는 DynamoDB에서 해당 뉴스의 제목, 내용, URL, 카테고리, 작성시간을 조회한다.<br/>5. AI 요약 내용과 함께 뉴스 상세 정보를 렌더링한다.<br/>6. 북마크 상태를 확인하여 버튼 UI를 업데이트한다.<br/>7. 하단에 동일 카테고리의 관련 뉴스 3개를 추천으로 표시한다.<br/>8. 조회수를 1 증가시켜 인기도 통계에 반영한다. |
| **결과** | 선택한 뉴스의 상세 정보와 AI 요약이 표시된다.<br/>북마크, 공유, 원문 링크 이동 기능을 제공한다.<br/>관련 뉴스 추천으로 사용자 체류 시간이 증가한다. |
| **예외** | 존재하지 않는 뉴스 ID<br/>- "뉴스를 찾을 수 없습니다. 삭제되었거나 잘못된 링크입니다." 메시지 표시<br/>원문 링크 오류<br/>- "원문 사이트에 접속할 수 없습니다" 안내 후 새 탭에서 열기 시도<br/>API 응답 지연<br/>- 스켈레톤 UI 표시 후 3초 타임아웃 시 재시도 버튼 제공 |

---

### UC-006: 카테고리별 필터링

| 항목 | 내용 |
|------|------|
| **제목** | UC-006: 카테고리별 필터링 |
| **액터** | 일반 사용자 |
| **조건** | - 사용자는 로그인된 상태이다.<br/>- FastAPI `/api/news?category={category}` 엔드포인트가 정상 작동한다.<br/>- DynamoDB NewsCards 테이블에 카테고리별 뉴스 데이터가 존재한다.<br/>- 6개 기본 카테고리(정치, 경제, 사회, 생활·문화, IT·과학, 연예)가 정의되어 있다. |
| **시나리오** | 1. 사용자가 뉴스 목록 상단의 카테고리 탭을 확인한다.<br/>2. 6개 카테고리 중 원하는 카테고리(예: "경제")를 클릭한다.<br/>3. 프론트엔드는 `/api/news?category=경제` API를 호출한다.<br/>4. FastAPI는 DynamoDB에서 해당 카테고리 뉴스를 쿼리한다.<br/>5. 선택된 카테고리의 뉴스만 필터링되어 렌더링된다.<br/>6. 활성 탭의 디자인이 하이라이트 상태로 변경된다.<br/>7. "전체" 탭 클릭 시 모든 카테고리 뉴스가 다시 표시된다. |
| **결과** | 선택한 카테고리의 뉴스만 조회되어 관심 분야에 집중할 수 있다.<br/>필터 상태가 URL에 반영되어 북마크 및 공유가 가능하다.<br/>직관적인 탭 UI로 사용자 경험이 향상된다. |
| **예외** | 카테고리별 뉴스 없음<br/>- "해당 카테고리의 뉴스가 아직 준비되지 않았습니다" 메시지와 다른 카테고리 제안<br/>잘못된 카테고리 파라미터<br/>- 자동으로 "전체" 카테고리로 리다이렉트<br/>API 응답 오류<br/>- "카테고리를 불러올 수 없습니다" 메시지와 새로고침 버튼 제공 |

---

## 🤖 자동화 시스템

### UC-012: 매일 뉴스 수집

| 항목 | 내용 |
|------|------|
| **제목** | UC-012: 매일 뉴스 수집 |
| **액터** | 자동화 시스템 (AWS Lambda) |
| **조건** | - EventBridge 스케줄러가 `cron(0 21 * * ? *)` (한국시간 오전 6시)로 설정되어 있다.<br/>- DeepSearch API 키가 유효하다.<br/>- DynamoDB NewsCards 테이블이 정상 작동한다.<br/>- Lambda 함수에 충분한 메모리(1024MB)와 타임아웃(900초)이 설정되어 있다. |
| **시나리오** | 1. EventBridge 스케줄러가 매일 오전 6시에 `daily-briefly-task` Lambda 함수를 트리거한다.<br/>2. Lambda는 `app.tasks.scheduler.lambda_handler`를 실행하여 `collect_today_news()` 함수를 호출한다.<br/>3. DeepSearch API에 6개 카테고리(정치, 경제, 사회, 생활/문화, IT/과학, 연예)별로 요청을 전송한다.<br/>4. ThreadPoolExecutor를 사용하여 모든 카테고리를 병렬로 동시 처리한다.<br/>5. 각 카테고리마다 자정~06시 시간 범위에서 인기 뉴스를 수집한다.<br/>6. 본문 길이 300자 이상, 중복 제거된 기사 최대 30개씩 카테고리별로 수집한다.<br/>7. DynamoDB NewsCards 테이블에 `news_id`, `category_date`, `title`, `content`, `published_at` 등의 필드로 저장한다.<br/>8. 성공/실패 결과를 CloudWatch Logs에 기록하고 다음 단계인 AI 요약 프로세스를 호출한다. |
| **결과** | 당일 최신 뉴스가 카테고리별로 최대 30개씩 총 180개가 DynamoDB에 저장된다.<br/>병렬 처리로 전체 수집 시간이 단축되고 효율성이 향상된다.<br/>AI 요약 및 TTS 변환을 위한 원본 데이터가 준비된다. |
| **예외** | DeepSearch API 응답 오류 (429, 500)<br/>- 지수 백오프로 최대 3회 재시도 후 해당 카테고리 스킵<br/>DynamoDB 쓰기 오류<br/>- CloudWatch 알람 발생 및 관리자 알림 전송<br/>Lambda 타임아웃 (15분 초과)<br/>- 처리 중인 데이터까지만 저장 후 다음 실행에서 재개<br/>네트워크 연결 실패<br/>- 재시도 로직 실행 후 실패 시 알람 발생 |

---

### UC-013: AI 요약 생성

| 항목 | 내용 |
|------|------|
| **제목** | UC-013: AI 요약 생성 |
| **액터** | 자동화 시스템 (AWS Lambda) |
| **조건** | - UC-012 뉴스 수집이 성공적으로 완료되어 있다.<br/>- OpenAI API 키가 유효하고 충분한 크레딧이 있다.<br/>- DynamoDB NewsCards와 Frequencies 테이블이 정상 작동한다.<br/>- `app.services.openai_service`와 클러스터링 모듈이 구현되어 있다. |
| **시나리오** | 1. 뉴스 수집 완료 후 스케줄러가 `generate_all_frequencies()` 함수를 호출한다.<br/>2. ThreadPoolExecutor를 사용하여 6개 카테고리를 병렬로 동시 처리한다.<br/>3. 각 카테고리별로 DynamoDB NewsCards에서 당일 수집된 최대 30개 뉴스의 본문을 조회한다.<br/>4. 1차 클러스터링: `cluster_similar_texts()` 함수로 유사도 80% 이상인 뉴스를 중복 제거한다.<br/>5. 유사한 기사들은 `summarize_group()` 함수로 통합 요약문을 생성한다.<br/>6. 2차 클러스터링: GPT 요약문 기반으로 유사도 75% 이상인 내용을 추가 제거한다.<br/>7. 각 카테고리별로 GPT-4o-mini에 "1800-2200자 팟캐스트 대본 생성" 프롬프트를 전송한다.<br/>8. 생성된 대본과 함께 ElevenLabs TTS로 음성 파일을 생성하고 S3 Presigned URL을 생성한다.<br/>9. DynamoDB Frequencies 테이블에 `frequency_id`, `category`, `script`, `audio_url` 필드로 저장한다. |
| **결과** | 6개 카테고리별로 고품질 AI 요약 대본과 음성 파일이 생성된다.<br/>이중 클러스터링으로 중복 내용이 제거되고 토큰 사용량이 최적화된다.<br/>병렬 처리로 전체 요약 생성 시간이 단축된다.<br/>S3 Presigned URL로 7일간 유효한 음성 스트리밍이 가능하다. |
| **예외** | OpenAI API 요청 한도 초과 (429)<br/>- 지수 백오프로 재시도, 필요시 처리 지연 알림<br/>GPT 응답 품질 저하 (대본 길이 부족, 형식 오류)<br/>- 최대 2회 재생성 요청, 실패 시 이전 버전 대본 사용<br/>클러스터링 메모리 부족<br/>- 클러스터링 스킵하고 원본 기사 사용<br/>ElevenLabs TTS 오류<br/>- S3 업로드 실패 시 audio_url 없이 스크립트만 저장 |

---

## 📊 유즈케이스 매트릭스

| 기능 영역 | 유즈케이스 수 | 복잡도 | 우선순위 |
|-----------|---------------|--------|----------|
| 사용자 인증 및 온보딩 | 3개 | 중간 | 높음 |
| 뉴스 조회 및 탐색 | 3개 | 중간 | 높음 |
| 팟캐스트 및 음성 서비스 | 2개 | 높음 | 높음 |
| 개인화 및 설정 | 3개 | 중간 | 중간 |
| 자동화 시스템 | 2개 | 높음 | 높음 |

---

**문서 작성 완료일**: 2025년 06월 05일  
**최종 검토일**: 2025년 06월 05일  
**문의 사항**: 프로젝트 팀 (briefly.team@example.com) 